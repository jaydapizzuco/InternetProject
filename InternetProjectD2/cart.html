<!-------------------------------------------------------
Final Project
Written by: Jayda Pizzuco 2281161 & Melissa Weller
*“The responsibility and work of each student shall be described precisely here”

Jayda:
Implementing the calculatePrices(), addRow() , displaySubtotal() and and checkout() methods
Getting and setting items to localstorage
For “Internet Programming” Section 1(Melissa)  and Section 2(Jayda)– Fall 2023
-------------------------------------------------------->
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Everything Store Cart</title>
  <link href="style.css" rel="stylesheet">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body >
    <header class="header">
        <h2>My Cart</h2>
    </header>

    <nav>
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="cart.html">Cart</a></li>
            <li><a href="about.html">About</a></li>
        </ul>
    </nav>

    <div id = "wrapper">
    <main>
        <br><br><table id = "cartTable">
            <tr>
                <th>Item</th>
                <th>Item Name</th>
                <th>Unit Price</th>
                <th>Quantity </th>
                <th>Subtotal</th>
            </tr>
        </table>

        <h1 id = "subtotal" align = "center"></h1>

        <button class = "button2" onclick="checkOut()">Checkout</button>
    </div>

<script>

    //declare variables for the price of each item
    var item1TotalPrice =0;
    var item2TotalPrice =0;
    var item3TotalPrice =0;
    var item4TotalPrice= 0;
    var item5TotalPrice =0;
    var item6TotalPrice =0;
    var item7TotalPrice =0;
    var item8TotalPrice= 0;
    var item9TotalPrice =0;
    var item10TotalPrice= 0;
    var totalPrice =0;
    var table =  document.getElementById("cartTable"); 


    //retrieve the quantity of each item that has been added to cart 
   const item1Quantity = localStorage.getItem('item1Quantity');
   const item2Quantity = localStorage.getItem('item2Quantity');
   const item3Quantity =localStorage.getItem('item3Quantity');
   const item4Quantity = localStorage.getItem('item4Quantity');
   const item5Quantity = localStorage.getItem('item5Quantity');
   const item6Quantity = localStorage.getItem('item6Quantity');
   const item7Quantity =localStorage.getItem('item7Quantity');
   const item8Quantity = localStorage.getItem('item8Quantity');
   const item9Quantity = localStorage.getItem('item9Quantity');
   const item10Quantity = localStorage.getItem('item10Quantity');

   //retrieve the name of each item that has been added to cart 
   const item1Name = localStorage.getItem('item1Name');
   const item2Name = localStorage.getItem('item2Name');
   const item3Name = localStorage.getItem('item3Name');
   const item4Name = localStorage.getItem('item4Name');
   const item5Name = localStorage.getItem('item5Name');
   const item6Name = localStorage.getItem('item6Name');
   const item7Name = localStorage.getItem('item7Name');
   const item8Name = localStorage.getItem('item8Name');
   const item9Name = localStorage.getItem('item9Name');
   const item10Name = localStorage.getItem('item10Name');
    
   calculatePrices();

function calculatePrices(){
  // if an item has been added to cart we calculate the subtotal price of this item by multiplying the quantity by the unit price
  // we then create a new row to display the item in the cart table
    if(item1Quantity > 0){
        item1TotalPrice = item1Quantity * 23.29;
        totalPrice = totalPrice + item1TotalPrice;
        addRow("item1.jpg",item1Name,23.29,item1TotalPrice, item1Quantity);
    }
    if(item2Quantity > 0){
        item2TotalPrice = item2Quantity * 24.99;
        totalPrice = totalPrice + item2TotalPrice;
        addRow("item2.jpg",item2Name,24.99,item2TotalPrice, item2Quantity);
    }
    if(item3Quantity > 0){
        item3Price = item3Quantity * 49.99;
        totalPrice = totalPrice + item3Price;
        addRow("item3.jpg",item3Name,49.99,item3Price,item3Quantity);
    }
    if(item4Quantity > 0){
        item4TotalPrice = item4Quantity * 32.45;
        totalPrice = totalPrice + item4TotalPrice;
        addRow("item4.jpg",item4Name,32.45,item4TotalPrice, item4Quantity);
    }
    if(item5Quantity > 0){
        item5TotalPrice = item5Quantity * 19.99;
        totalPrice = totalPrice + item5TotalPrice;
        addRow("item5.jpg",item5Name,19.99,item5TotalPrice, item5Quantity);
    }
    if(item6Quantity > 0){
        item6TotalPrice = item6Quantity * 15.99;
        totalPrice = totalPrice + item6TotalPrice;
        addRow("item6.jpg",item6Name,15.99,item6TotalPrice, item6Quantity);
    }
    if(item7Quantity > 0){
        item7Price = item7Quantity * 24.99;
        totalPrice = totalPrice + item7Price;
        addRow("item7.jpg",item7Name,24.99,item7Price,item7Quantity);
    }
    if(item8Quantity > 0){
        item8TotalPrice = item8Quantity * 36.99;
        totalPrice = totalPrice + item8TotalPrice;
        addRow("item8.jpg",item8Name,32.45,item8TotalPrice, item8Quantity);
    }
    if(item9Quantity > 0){
        item9Price = item9Quantity * 18.99;
        totalPrice = totalPrice + item9Price;
        addRow("item9.jpg",item9Name,18.99,item9Price,item9Quantity);
    }
    if(item10Quantity > 0){
        item10TotalPrice = item10Quantity * 21.99;
        totalPrice = totalPrice + item10TotalPrice;
        addRow("item10.jpg",item10Name,21.99,item10TotalPrice, item10Quantity);
    }
    localStorage.setItem('order',table.innerHTML);
    displaySubtotal();
}

//this method creates a row in the cart table 
function addRow(imgName,name,unitPrice,price,quantity){
            
    table =  document.getElementById("cartTable"); 
   
    let newRow = document.createElement("tr");

    let imgTd = document.createElement("td");
    let img = document.createElement('img');
    img.src = (imgName);
    img.style.width = "75%";
    img.style.height = "auto";
    imgTd.appendChild (img);
    newRow.appendChild(imgTd);

    let nameTd = document.createElement("td");
    let nameInfo = document.createTextNode(name);
    nameTd.appendChild (nameInfo);
    newRow.appendChild(nameTd);

    let upTd = document.createElement("td");
    let unitPriceInfo = document.createTextNode(unitPrice);
    upTd.appendChild (unitPriceInfo);
    newRow.appendChild(upTd);

    let quantityTd = document.createElement("td");
    let quantityInfo = document.createTextNode(quantity);
    quantityTd.appendChild (quantityInfo);
    newRow.appendChild(quantityTd);

    let subtotalTd = document.createElement("td");
    let subtotalInfo = document.createTextNode(price);
    subtotalTd.appendChild (subtotalInfo);
    newRow.appendChild(subtotalTd);

    table.appendChild(newRow);

    document.getElementById("cartTable").value = table;
}

//displays the newly calculated subtotal price (this price is calcuated in the calculatePrices())
function displaySubtotal(){
    document.getElementById("subtotal").innerHTML = "Subtotal: $" + totalPrice.toFixed(2); 
}

//opens up the checkout page
function checkOut(){
    window.location.href = "checkout.html";
}

//saves subtotal price to loacl storage so that we can use it in the checkout page
localStorage.setItem('subtotal',totalPrice.toFixed(2));
    </script><br><br><br>
    </main>
    
    
    <footer>
        Copyright &copy; 2023 Everything Store<br>
    </footer>
</body>
</html>